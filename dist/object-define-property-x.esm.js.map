{"version":3,"sources":["../src/object-define-property-x.js"],"names":[],"mappings":"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","file":"object-define-property-x.esm.js","sourcesContent":["import attempt from 'attempt-x';\nimport toObject from 'to-object-x';\nimport toPropertyKey from 'to-property-key-x';\nimport has from 'has-own-property-x';\nimport isFunction from 'is-function-x';\nimport assertIsObject from 'assert-is-object-x';\n\n/** @type {BooleanConstructor} */\nconst castBoolean = true.constructor;\nconst nativeDefProp = typeof Object.defineProperty === 'function' && Object.defineProperty;\nlet definePropertyFallback;\n\nconst toPropertyDescriptor = function _toPropertyDescriptor(desc) {\n  const object = toObject(desc);\n  const descriptor = {};\n\n  if (has(object, 'enumerable')) {\n    descriptor.enumerable = Boolean(object.enumerable);\n  }\n\n  if (has(object, 'configurable')) {\n    descriptor.configurable = Boolean(object.configurable);\n  }\n\n  if (has(object, 'value')) {\n    descriptor.value = object.value;\n  }\n\n  if (has(object, 'writable')) {\n    descriptor.writable = Boolean(object.writable);\n  }\n\n  if (has(object, 'get')) {\n    const getter = object.get;\n\n    if (typeof getter !== 'undefined' && isFunction(getter) === false) {\n      throw new TypeError('getter must be a function');\n    }\n\n    descriptor.get = getter;\n  }\n\n  if (has(object, 'set')) {\n    const setter = object.set;\n\n    if (typeof setter !== 'undefined' && isFunction(setter) === false) {\n      throw new TypeError('setter must be a function');\n    }\n\n    descriptor.set = setter;\n  }\n\n  if ((has(descriptor, 'get') || has(descriptor, 'set')) && (has(descriptor, 'value') || has(descriptor, 'writable'))) {\n    throw new TypeError('Invalid property descriptor. Cannot both specify accessors and a value or writable attribute');\n  }\n\n  return descriptor;\n};\n\n// ES5 15.2.3.6\n// http://es5.github.com/#x15.2.3.6\n\n// Patch for WebKit and IE8 standard mode\n// Designed by hax <hax.github.com>\n// related issue: https://github.com/es-shims/es5-shim/issues#issue/5\n// IE8 Reference:\n//     http://msdn.microsoft.com/en-us/library/dd282900.aspx\n//     http://msdn.microsoft.com/en-us/library/dd229916.aspx\n// WebKit Bugs:\n//     https://bugs.webkit.org/show_bug.cgi?id=36423\n\n/**\n * This method defines a new property directly on an object, or modifies an\n * existing property on an object, and returns the object.\n *\n * @param {object} object - The object on which to define the property.\n * @param {string} property - The name of the property to be defined or modified.\n * @param {object} descriptor - The descriptor for the property being defined or modified.\n * @returns {object} The object that was passed to the function.\n * });.\n */\nlet $defineProperty;\n\n// check whether defineProperty works if it's given. Otherwise, shim partially.\nif (nativeDefProp) {\n  const testWorksWith = function _testWorksWith(object) {\n    const testResult = attempt(nativeDefProp, object, 'sentinel', {});\n\n    return testResult.threw === false && testResult.value === object && 'sentinel' in object;\n  };\n\n  const doc = typeof document !== 'undefined' && document;\n\n  if (testWorksWith({}) && (castBoolean(doc) === false || testWorksWith(doc.createElement('div')))) {\n    $defineProperty = function defineProperty(object, property, descriptor) {\n      return nativeDefProp(assertIsObject(object), toPropertyKey(property), toPropertyDescriptor(descriptor));\n    };\n  } else {\n    definePropertyFallback = nativeDefProp;\n  }\n}\n\nif (castBoolean(nativeDefProp) === false || definePropertyFallback) {\n  const prototypeOfObject = Object.prototype;\n\n  // If JS engine supports accessors creating shortcuts.\n  let defineGetter;\n  let defineSetter;\n  let lookupGetter;\n  let lookupSetter;\n  const supportsAccessors = has(prototypeOfObject, '__defineGetter__');\n\n  if (supportsAccessors) {\n    /* eslint-disable-next-line no-underscore-dangle,no-restricted-properties */\n    defineGetter = prototypeOfObject.__defineGetter__;\n    /* eslint-disable-next-line no-underscore-dangle,no-restricted-properties */\n    defineSetter = prototypeOfObject.__defineSetter__;\n    /* eslint-disable-next-line no-underscore-dangle */\n    lookupGetter = prototypeOfObject.__lookupGetter__;\n    /* eslint-disable-next-line no-underscore-dangle */\n    lookupSetter = prototypeOfObject.__lookupSetter__;\n  }\n\n  $defineProperty = function defineProperty(object, property, descriptor) {\n    assertIsObject(object);\n    const propKey = toPropertyKey(property);\n    const propDesc = toPropertyDescriptor(descriptor);\n\n    // make a valiant attempt to use the real defineProperty for IE8's DOM elements.\n    if (definePropertyFallback) {\n      const result = attempt.call(Object, definePropertyFallback, object, propKey, propDesc);\n\n      if (result.threw === false) {\n        return result.value;\n      }\n      // try the shim if the real one doesn't work\n    }\n\n    // If it's a data property.\n    if (has(propDesc, 'value')) {\n      // fail silently if 'writable', 'enumerable', or 'configurable' are requested but not supported\n      if (supportsAccessors && (lookupGetter.call(object, propKey) || lookupSetter.call(object, propKey))) {\n        // As accessors are supported only on engines implementing\n        // `__proto__` we can safely override `__proto__` while defining\n        // a property to make sure that we don't hit an inherited accessor.\n        /* eslint-disable-next-line no-proto */\n        const prototype = object.__proto__;\n        /* eslint-disable-next-line no-proto */\n        object.__proto__ = prototypeOfObject;\n        // Deleting a property anyway since getter / setter may be defined on object itself.\n        delete object[propKey];\n        object[propKey] = propDesc.value;\n        // Setting original `__proto__` back now.\n        /* eslint-disable-next-line no-proto */\n        object.__proto__ = prototype;\n      } else {\n        object[propKey] = propDesc.value;\n      }\n    } else {\n      if (supportsAccessors === false && (propDesc.get || propDesc.set)) {\n        throw new TypeError('getters & setters can not be defined on this javascript engine');\n      }\n\n      // If we got that far then getters and setters can be defined !!\n      if (propDesc.get) {\n        defineGetter.call(object, propKey, propDesc.get);\n      }\n\n      if (propDesc.set) {\n        defineSetter.call(object, propKey, propDesc.set);\n      }\n    }\n\n    return object;\n  };\n}\n\nconst defProp = $defineProperty;\n\nexport default defProp;\n"]}